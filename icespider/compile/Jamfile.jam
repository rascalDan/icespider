lib adhocutil : : : : <include>/usr/include/adhocutil ;
lib slicer : : : : <include>/usr/include/slicer <include>/usr/include/adhocutil ;
lib slicer-json ;
lib boost_program_options ;
lib stdc++fs ;
lib mcpp ;

obj routes : routes.ice : <use>../common//icespider-common <toolset>tidy:<checker>none ;
lib icespider-compile :
	routeCompiler.cpp
	routes.ice
	routes
	:
	<slicer>pure
# Need to disable LTO here cos of a GCC bug, this isn't
# performance critical anyway
	<linkflags>-fno-lto
	<cxxflags>-fno-lto
	<library>slicer
	<library>adhocutil
	<library>slicer-json
	<library>stdc++fs
	<library>slice//Slice
	<library>../common//icespider-common
	<implicit-dependency>../common//icespider-common
	<implicit-dependency>routes
	<library>..//Ice
	<library>..//pthread
	<library>mcpp
	: :
	<library>stdc++fs
	<library>../common//icespider-common
	;

exe icespider :
	main.cpp
	:
	<library>boost_program_options
	<library>icespider-compile
	<implicit-dependency>icespider-compile
	;

